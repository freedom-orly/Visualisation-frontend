<tui-breadcrumbs [size]="'l'">
    @for (item of breadcrumbsItems; track $index) {
    <a *tuiItem tuiLink [routerLink]="item.routerLink">{{item.caption}}</a>
    }
</tui-breadcrumbs>
<hr>
<div class="split">
    <div class="left-panel">
        <tui-scrollbar class="box">
            @if (visualizations$ | async; as visuals) {
            @for (vis of visuals; track $index) {
            <app-link-button (click)="changeVisualization(vis)" (hover)="changeVisualization(vis)"
                [icon]="vis.is_prediction ? '@tui.help-circle' : '@tui.clock'" [label]="vis.name"
                [link]="'' + vis.id"></app-link-button>
            }
            }
            @else {
            <div class="loader">
                <tui-loader></tui-loader>
            </div>

            }
        </tui-scrollbar>
    </div>
    <div class="right-panel">
        <div class="vl"></div>
        <div class="subright">
            <div class="top tui-space_top-5">
                <h2 tuiTitle="l">
                    {{current?.name}}
                    <span class="desc" tuiSubtitle>{{current?.description}}</span>
                </h2>
                <div class="updates tui-space_top-5">
                    <h4 tuiTitle="m">
                        Latest updates:
                    </h4>
                    <div tuiAppearance="floating" class="tui-space_top-3" tuiCardLarge>
                        <section>
                            @if (current?.last_updates && current?.last_updates!.length > 0) {
                                 @for (update of current?.last_updates; track $index) {
                            <div class="cell" [tuiCell]="'s'">
                                <div class="name" tuiTitle>{{update.name}}</div>
                                <div class="value" tuiTitle>{{update.time | date}}</div>
                            </div>
                            }
                            }
                            @else {
                                <div class="cell" [tuiCell]="'s'">
                                    No updates available.
                                </div>
                            }
                        </section>
                    </div>
                </div>

            </div>

            <div class="bottom tui-space_top-3 tui-space_bottom-16">
                <button iconEnd="@tui.chevron-right" size="l" class="see-more-btn" [routerLink]="'data/'+ current?.id"
                    appearance="primary" tuiButton type="button">
                    Upload new data
                </button>
                <button iconEnd="@tui.chevron-right" size="l" class="see-more-btn tui-space_top-6"
                    [routerLink]="'rscript/'+ current?.id" appearance="secondary-destructive" tuiButton type="button">
                    Upload new r script
                </button>
            </div>


        </div>


    </div>
</div>